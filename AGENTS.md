# Repository Guidelines

## Project Structure & Module Organization
- `content/`: Markdown pages with YAML front matter (e.g., `index.zh-cn.md`, news/weekly posts). Assets may live alongside pages.
- `layouts/`, `themes/`: Hugo templates and theme overrides (Hextra + embed-pdf shortcode).
- `assets/`, `static/`: Site assets; `static/` is served at the root, `assets/` is piped by Hugo.
- `scripts/`: Python 3.11 utilities and shell workflows (managed by `uv`), used by CI to generate course/news pages.
- `public/`: Build output (generated by `hugo`).
- `hugo.yaml`: Site configuration, menus, languages, analytics, and comments.

## Build, Test, and Development Commands
- Preview locally: `hugo server -D` — starts a dev server with drafts.
- Production build: `hugo --gc --minify` — writes to `public/`.
- Setup script env: `cd scripts && uv sync` — installs Python deps into a local venv.
- Run a script: `uv run python scripts/news/gen_news.py` (set `TOKEN` if required).
- Batch helpers (Linux/macOS): `./scripts/workflows/build_semester_pages.sh`.

## Coding Style & Naming Conventions
- Markdown: YAML front matter with `title`, `date`, `tags` as needed; prefer `index.zh-cn.md` for localized sections.
- Naming: kebab-case directories/files (e.g., `weekly-2025-07-25/`).
- Content: concise Chinese copy; keep headings ordered (`#`, `##`, ...). Images relative to the page or under `static/`.
- Python (`scripts/`): Python 3.11; formatting via Ruff in CI. Prefer type hints and descriptive names.

## Testing Guidelines
- No formal unit tests. Validate by preview and build:
  - `hugo server -D` — check pages, links, and images.
  - `hugo --printI18nWarnings --printPathWarnings` — watch for warnings.
- PRs should build cleanly with no Hugo errors.

## Commit & Pull Request Guidelines
- Commits: follow Conventional Commits (`docs:`, `ci:`, `feat:`, `fix:`). Example: `docs: add weekly 2025-07-25 report`.
- PRs: include a clear description, linked issues, and screenshots for visible changes. Keep diffs focused and small.
- Before opening: run preview/build locally; update/generated files under `content/` should be included if relevant.

## Security & Configuration Tips
- Do not commit secrets. Use GitHub Actions secrets (`GITHUB_TOKEN`, `PERSONAL_ACCESS_TOKEN`).
- Some scripts require `TOKEN` and org `HITSZ-OpenAuto`; export env vars when running locally.
