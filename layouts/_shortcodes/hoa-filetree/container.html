{{- $driveURL := .Get "driveURL" | default "https://open.osa.moe/openauto" -}}
{{- $repoURL := .Get "repoURL" | default "https://github.com/HITSZ-OpenAuto/hoa-moe/" -}}

{{- $jsFileTree := resources.Get "js/hoa-filetree.js" -}}
{{- $jsFileCheck := resources.Get "js/file-check.js" -}}
{{- $jsFileDownload := resources.Get "js/file-download.js" -}}


<div class="not-prose hx:mt-4 hx:flex hx:w-full hx:flex-col">
  <div class="hx:mb-2 hx:flex hx:items-center hx:justify-start hx:gap-2">
    <button
      class="hx:flex hx:items-center hx:space-x-2 hx:rounded-lg hx:bg-blue-50 hx:px-2 hx:py-1 hx:text-xs hx:text-blue-600 hx:transition hx:hover:bg-blue-100 hx:md:text-sm hx:dark:bg-gray-800 hx:dark:text-blue-400 hx:dark:hover:bg-gray-700"
    >
      <a href="{{ $driveURL }}" target="_blank" class="hx:flex hx:items-center hx:gap-1">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="hx:size-3 hx:md:size-4"
        >
          <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z" />
        </svg>
        å†…ç½‘ç½‘ç›˜
      </a>
    </button>
    <button
      class="hoa-filetree-download hx:flex hx:items-center hx:gap-1 hx:space-x-2 hx:rounded-lg hx:bg-blue-50 hx:px-2 hx:py-1 hx:text-xs hx:text-blue-600 hx:transition hx:hover:bg-blue-100 hx:md:text-sm hx:dark:bg-gray-800 hx:dark:text-blue-400 hx:dark:hover:bg-gray-700"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="hx:size-3 hx:md:size-4"
      >
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
        <polyline points="7 10 12 15 17 10" />
        <line x1="12" x2="12" y1="15" y2="3" />
      </svg>
      æ‰¹é‡ä¸‹è½½
    </button>
    <div class="hx:flex-1"></div>
    <input type="checkbox" id="hoa-filetree-download-accelerate" class="hoa-filetree-download-accelerate hx:h-0 hx:w-0 hx:opacity-0" />
    <!-- <label
      for="hoa-filetree-download-accelerate"
      class="select hx:flex hx:items-center hx:gap-1 hx:space-x-2 hx:rounded-lg hx:bg-blue-50 hx:px-2 hx:py-1 hx:text-xs hx:text-gray-700 hx:transition hx:hover:bg-blue-100 hx:md:text-sm hx:dark:bg-gray-800 hx:dark:text-gray-300 hx:dark:hover:bg-gray-700"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="hx:size-3 hx:md:size-4"
      >
        <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z" />
      </svg>
      æ ¡å›­ç½‘åŠ é€Ÿ
      <div class="hx:relative hx:h-5 hx:w-10">
        <div class="slider hx:absolute hx:top-0 hx:right-0 hx:bottom-0 hx:left-0 hx:ml-1 hx:rounded-full hx:bg-gray-300 hx:p-0.5 hx:transition-colors hx:dark:bg-gray-600">
          <div class="hx:h-4 hx:w-4 hx:transform hx:rounded-full hx:bg-white hx:shadow-xs hx:transition-transform"></div>
        </div>
      </div>
    </label> -->
  </div>
  <div class="hx:w-full hx:rounded-xs">
    {{ partial "hoa-filetree/header.html" . }}
    <ul class="hoa-filetree-container hx:my-0 hx:w-full">
      {{- .Inner -}}
      <div
        class="hoa-filetree-contribute-hint hx:mb-2 hx:flex hx:h-32 hx:w-full hx:flex-col hx:items-center hx:justify-center hx:rounded-b-md hx:border-1 hx:border-t-0 hx:border-dashed hx:border-gray-200 hx:bg-[#f6f8fa]/[0.4] hx:dark:border-gray-600 hx:dark:bg-[#090705]/[0.4]"
      >
        <div class="hx:mt-1 hx:text-xs hx:text-slate-700 hx:md:text-sm hx:dark:text-slate-300">
          æƒ³å‚ä¸ï¼Ÿæ¥<a href="{{ $repoURL }}" class="hoa-inline-link hx:mx-0.5">è¯¾ç¨‹ä»“åº“</a>æäº¤ PR å§ï¼ğŸ‘‰
          <a href="https://hoa.moe/blog/contribution-guide/" class="hoa-inline-link hx:mx-0.5">æŸ¥çœ‹ã€Šå‚ä¸æŒ‡å—ã€‹</a>
        </div>
      </div>
    </ul>
  </div>
</div>

{{- if hugo.IsProduction -}}
  {{- $jsFileTree = $jsFileTree | minify | fingerprint -}}
  {{- $jsFileCheck = $jsFileCheck | minify | fingerprint -}}
  {{- $jsFileDownload = $jsFileDownload | minify | fingerprint -}}
{{- end -}}
<script defer src="{{ $jsFileTree.RelPermalink }}" integrity="{{ $jsFileTree.Data.Integrity }}"></script>
<script defer src="{{ $jsFileCheck.RelPermalink }}" integrity="{{ $jsFileCheck.Data.Integrity }}"></script>
<script defer src="{{ $jsFileDownload.RelPermalink }}" integrity="{{ $jsFileDownload.Data.Integrity }}"></script>
